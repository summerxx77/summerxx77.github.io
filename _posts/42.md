layout: CFString​Transform 
title: CFString​Transform 
date: 2016-12-06 23:25:02
tags: CFString​Transform 
---
![](http://ww1.sinaimg.cn/large/e6a4355cgy1fia25jswt2j21z418g4qq.jpg)
前言: `CFString​Transform`是一个你不太常见的函数, 他可以把字符串变得标准化.
比如
- 去掉重音和变音符号
- 为 Unicode 字符命名
- 综合

CFString​Transform 是 Core Foundation 中的一部分, 下面介绍一下如何简单的使用

参数介绍
- string : 需要转换的字符串
- range: 作用范围
- transform需要进行的转化
- reverse: 是否返回反转过的变换
<!-- more -->

## 去掉重音和变音符号
比如Énġlišh långuãge有这样一串字符串 使用`kCFStringTransformStripCombiningMarks`这个把一些奇奇怪怪的符号去掉, 如何做呢, 请看示例代码:

```
CFMutableStringRef string = CFStringCreateMutableCopy(NULL, 0, CFSTR("Énġlišh långuãge"));
CFStringTransform(string, NULL, kCFStringTransformStripCombiningMarks, false);
NSLog(@"%@", string);
CFRelease(string);
// 2016-12-06 22:31:08.504 BookCode[2895:146978] English language
```

## 为 Unicode 字符命名
```
CFMutableStringRef string1 = CFStringCreateMutableCopy(NULL, 0, CFSTR("🐷🍎"));
CFStringTransform(string1, NULL, kCFStringTransformToUnicodeName, false);
NSLog(@"%@", string1);
CFRelease(string1);
// 2016-12-06 22:37:15.054 BookCode[2972:153135] \N{PIG FACE}\N{RED APPLE}
```
除了上边两种以外 `transform ` 还有更多的方式值得选择
> CF_EXPORT const CFStringRef kCFStringTransformStripCombiningMarks;
CF_EXPORT const CFStringRef kCFStringTransformToLatin;
CF_EXPORT const CFStringRef kCFStringTransformFullwidthHalfwidth;
CF_EXPORT const CFStringRef kCFStringTransformLatinKatakana;
CF_EXPORT const CFStringRef kCFStringTransformLatinHiragana;
CF_EXPORT const CFStringRef kCFStringTransformHiraganaKatakana;
CF_EXPORT const CFStringRef kCFStringTransformMandarinLatin;
CF_EXPORT const CFStringRef kCFStringTransformLatinHangul;
CF_EXPORT const CFStringRef kCFStringTransformLatinArabic;
CF_EXPORT const CFStringRef kCFStringTransformLatinHebrew;
CF_EXPORT const CFStringRef kCFStringTransformLatinThai;
CF_EXPORT const CFStringRef kCFStringTransformLatinCyrillic;
CF_EXPORT const CFStringRef kCFStringTransformLatinGreek;
CF_EXPORT const CFStringRef kCFStringTransformToXMLHex;
CF_EXPORT const CFStringRef kCFStringTransformToUnicodeName;
CF_EXPORT const CFStringRef kCFStringTransformStripDiacritics CF_AVAILABLE(10_5, 2_0);

`CFStringTransform` 可以在拉丁语和阿拉伯语、西里尔语、希腊语、韩语（韩国）、希伯来语、日语（平假名和片假名）、普通话、泰语之间来回转写。

这里还有一种语言比较特殊就是日语, 日语中的文字有的跟汉字长得一样(具体什么渊源我也不知道). 😳 如果你感兴趣可以看这里
[https://github.com/00StevenG/NSString-Japanese](https://github.com/00StevenG/NSString-Japanese) 是如何处理复杂额日文文本的他能够处理汉字, 罗马字, 还有日语的(平假名和片假名).

## 处理用户产生的内容
[https://developer.apple.com/reference/corefoundation/1666536-cfstringtokenizer](https://developer.apple.com/reference/corefoundation/1666536-cfstringtokenizer)
比如我在搜索引擎 键入 `SUMMER夏天是个iOS developmer nín hǎ`
```
CFMutableStringRef string = CFStringCreateMutableCopy(NULL, 0, CFSTR("SUMMER夏天是个iOS developmer nín hǎo"));
// 非英文文本转换为拉丁字母
CFStringTransform(string, NULL, kCFStringTransformToLatin, false);
// 去重音
CFStringTransform(string, NULL, kCFStringTransformStripCombiningMarks, false);
// 变小写
CFStringLowercase(string, NULL);
NSLog(@"%@", string);
CFRelease(string);
// 2016-12-06 23:20:37.833 BookCode[3248:183337] summer xia tian shi geios developmer nin hao 处理之后
```
通过对用户输入的文本使用同样的变换，你就可以实现一个通用的搜索，无论搜索文本或内容是什么语言！

今天就到这~
> 我是夏天 正在参加博客之星评选 如果可以在文章列表找到我的拉票文章, 给我头上一票

<div align=center>
微信公众号 得到最快最新的推送
</div>

<div align=center>
![](http://ww1.sinaimg.cn/large/0060lm7Tgw1f9656jhucpj307607674r.jpg)
</div>

> 我是夏天, 暖暖的夏天
End
